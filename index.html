<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ğŸ”¥ Retos Atrevidos</title>

<style>
body {
    background:#1e1e1e;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    font-family:'Segoe UI',sans-serif;
}

.iphone {
    width:430px;
    height:932px;
    background:#fff;
    border-radius:45px;
    box-shadow:0 0 40px rgba(0,0,0,.6);
    overflow:hidden;
    position:relative;
}

.notch {
    width:200px;
    height:35px;
    background:#000;
    border-radius:0 0 20px 20px;
    margin:auto;
}

header {
    background:linear-gradient(135deg,#ff2f6e,#ff6b81);
    color:#fff;
    text-align:center;
    padding:18px;
    font-size:22px;
    font-weight:bold;
}

.screen {
    padding:20px;
}

.card {
    background:#f7f7f7;
    border-radius:20px;
    padding:20px;
    margin-bottom:15px;
    text-align:center;
}

.btn {
    width:100%;
    padding:15px;
    border:none;
    border-radius:15px;
    font-size:17px;
    margin-top:10px;
    cursor:pointer;
    color:#fff;
    background:#ff2f6e;
}

.btn.shot { background:#2f9e44; }
.btn.alt { background:#6c63ff; }

.counter {
    font-size:46px;
    font-weight:bold;
    margin:15px 0;
}

.toggle {
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#eee;
    padding:12px;
    border-radius:15px;
    margin-bottom:15px;
}

footer {
    position:absolute;
    bottom:0;
    width:100%;
    padding:12px;
    border-top:1px solid #ddd;
    background:#fff;
    text-align:center;
    font-size:14px;
}
</style>
</head>

<body>

<div class="iphone">
    <div class="notch"></div>
    <header>ğŸ”¥ Retos Atrevidos</header>

    <div class="screen">

        <div class="toggle">
            <span>ğŸ¥ƒ Modo Fiesta</span>
            <input type="checkbox" id="modoFiesta" checked>
        </div>

        <div class="card">
            <p><b>ğŸ”¥ Intensidad:</b> <span id="nivel">1</span></p>
            <p><b>ğŸ“œ Retos completados:</b> <span id="total">0</span></p>
        </div>

        <button class="btn" onclick="retoAtrevido()">ğŸ”¥ Reto Atrevido</button>
        <button class="btn shot" onclick="retoShot()">ğŸ¥ƒ Reto con Shot</button>

        <div class="card" id="retoCard">
            <p>Presiona un botÃ³n para empezar ğŸ˜ˆ</p>
        </div>

        <div class="card">
            <h4>ğŸ“œ Historial</h4>
            <div id="historial" style="font-size:13px;max-height:120px;overflow:auto;"></div>
        </div>

    </div>

    <footer>
        Intensidad sube automÃ¡ticamente ğŸ”¥
    </footer>
</div>

<script>
// ================= VOZ =================
function hablar(texto){
    speechSynthesis.cancel();
    const voz=new SpeechSynthesisUtterance(texto);
    voz.lang="es-ES";
    speechSynthesis.speak(voz);
}

// ================= VIBRACIÃ“N =================
function vibrar(ms=200){
    if(navigator.vibrate) navigator.vibrate(ms);
}

// ================= DATOS =================
let historial=[];
let completados=0;
let intensidad=1;
let recientes=[];

const retosAtrevidos=[
"Besa intensamente por 15 segundos",
"Perrea muy pegado durante 20 segundos",
"Ojos vendados: recibe un beso donde quiera tu pareja",
"Baila sensual frente a tu pareja",
"Beso sin manos por 10 segundos",
"Perreo por detrÃ¡s intenso",
"Ojos vendados: adivina si fue beso o caricia",
"Beso largo sin hablar despuÃ©s",
"Baila lento muy pegado",
"Perreo subiendo intensidad"
];

const retosShot=[
"Shot o beso intenso",
"Shot o perreo por 15 segundos",
"Shot o ojos vendados + beso sorpresa",
"Shot o baile sensual",
"Shot o beso sin manos"
];

// ================= UTIL =================
function obtenerReto(lista){
    let i;
    do {
        i=Math.floor(Math.random()*lista.length);
    } while(recientes.includes(i));

    recientes.push(i);
    if(recientes.length>3) recientes.shift();
    return lista[i];
}

function actualizarStats(){
    document.getElementById("nivel").innerText=intensidad;
    document.getElementById("total").innerText=completados;
}

function guardarHistorial(texto){
    historial.unshift(texto);
    document.getElementById("historial").innerHTML=historial.slice(0,10).join("<br>");
}

// ================= CONTADOR =================
function contador(segundos){
    let s=segundos;
    hablar(`Comienza. ${segundos} segundos`);
    vibrar();

    const card=document.getElementById("retoCard");
    const inter=setInterval(()=>{
        card.innerHTML=`<h3>â±ï¸</h3><div class="counter">${s}</div>`;
        hablar(s.toString());
        s--;

        if(s<0){
            clearInterval(inter);
            completados++;
            if(completados%3===0) intensidad++;
            actualizarStats();
            card.innerHTML="<h3>âœ… Reto completado</h3>";
            hablar("Reto completado");
            vibrar(400);
        }
    },1000);
}

// ================= RETOS =================
function retoAtrevido(){
    const texto=obtenerReto(retosAtrevidos);
    guardarHistorial("ğŸ”¥ "+texto);
    hablar(texto);

    document.getElementById("retoCard").innerHTML=`
        <h3>ğŸ”¥ Reto</h3>
        <p>${texto}</p>
        <button class="btn" onclick="contador(${10+intensidad*2})">â–¶ Iniciar</button>
    `;
}

function retoShot(){
    if(!document.getElementById("modoFiesta").checked){
        alert("Modo fiesta desactivado");
        return;
    }

    const texto=obtenerReto(retosShot);
    guardarHistorial("ğŸ¥ƒ "+texto);
    hablar(texto);

    document.getElementById("retoCard").innerHTML=`
        <h3>ğŸ¥ƒ Shot</h3>
        <p>${texto}</p>
        <button class="btn shot" onclick="shot()">ğŸ¥ƒ Shot</button>
        <button class="btn" onclick="contador(10)">ğŸ’‹ Beso</button>
    `;
}

function shot(){
    completados++;
    if(completados%3===0) intensidad++;
    actualizarStats();
    hablar("Shot bebido. Reto completado");
    vibrar(500);

    document.getElementById("retoCard").innerHTML=`
        <h3>ğŸ» Shot bebido</h3>
        <p>Reto completado</p>
    `;
}
</script>

</body>
</html>
